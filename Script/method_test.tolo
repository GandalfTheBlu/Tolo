#include <memory>
#include <io>

struct Parent
{
    ptr vtp;
};

void Parent::pFoo()
{
    print("Parent\n");
}

void Parent::Foo()
{
    goto *this.vtp;
}

virtual Parent
{
    void Parent::pFoo(Parent::ptr);
};


struct Child : Parent
{};

void Child::vFoo()
{
    print("Child\n");
}

virtual Child
{
    void Child::vFoo(Child::ptr);
};

void main()
{
    Child c = Child(Child::vtp());
    Parent::ptr p = Parent::ptr(&c);
    p.Foo();
}